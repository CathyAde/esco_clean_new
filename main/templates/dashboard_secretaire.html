{% extends 'base.html' %}
{% load static %}

{% block title %}Espace Secrétaire - ESCO{% endblock %}

{% block content %}
<div class="modern-container">
    <!-- Header avec glassmorphism -->
    <div class="secretary-header">
        <div class="header-content">
            <div class="secretary-info">
                <div class="secretary-avatar">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div class="secretary-details">
                    <h2>{{ user.first_name|default:user.username }} {{ user.last_name|default:"" }}</h2>
                    <p class="secretary-role">Secrétaire Médicale</p>
                    <span class="status-badge">En service</span>
                </div>
            </div>
            <div class="quick-stats">
                <div class="stat-card">
                    <div class="stat-number">{{ rdv_today_count }}</div>
                    <div class="stat-label">RDV aujourd'hui</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ rdv_pending_count }}</div>
                    <div class="stat-label">En attente</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">{{ rdv_confirmed_count }}</div>
                    <div class="stat-label">Confirmés</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Actions rapides modernes -->
    <div class="quick-actions">
        <a href="{% url 'nouveau_rdv' %}" class="action-card primary">
            <div class="action-icon">
                <i class="fas fa-calendar-plus"></i>
            </div>
            <div class="action-content">
                <h3>Nouveau RDV</h3>
                <p>Planifier un rendez-vous</p>
            </div>
            <div class="action-button">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>

        <a href="{% url 'mes_rdv' %}" class="action-card secondary">
            <div class="action-icon">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="action-content">
                <h3>Planning</h3>
                <p>Gérer les rendez-vous</p>
            </div>
            <div class="action-button">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>

        <a href="/admin/main/patient/add/" class="action-card accent">
            <div class="action-icon">
                <i class="fas fa-user-plus"></i>
            </div>
            <div class="action-content">
                <h3>Nouveau Patient</h3>
                <p>Enregistrer un patient</p>
            </div>
            <div class="action-button">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>

        <a href="#" class="action-card info">
            <div class="action-icon">
                <i class="fas fa-phone"></i>
            </div>
            <div class="action-content">
                <h3>Appels</h3>
                <p>Journal des appels</p>
            </div>
            <div class="action-button">
                <i class="fas fa-arrow-right"></i>
            </div>
        </a>
    </div>

    <!-- Contenu principal -->
    <div class="main-content">
        <!-- Planning des rendez-vous -->
        <div class="content-section">
            <div class="section-header">
                <h3><i class="fas fa-calendar-alt me-2"></i>Rendez-vous du Jour</h3>
                <div class="header-actions">
                    <span class="section-badge">{{ today_date }}</span>
                    <button class="refresh-btn" onclick="location.reload()">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            
            <div class="appointments-container">
                <!-- Bloc matinée -->
                <div class="time-block">
                    <div class="time-block-header">
                        <h4>Matinée</h4>
                        <span class="block-count">{{ rdv_morning_count }} RDV</span>
                    </div>
                    
                    {% for rdv in rdv_morning %}
                    <div class="appointment-item {% if rdv.statut == 'urgent' %}urgent{% elif rdv.statut == 'confirmé' %}confirmed{% elif rdv.statut == 'en_attente' %}pending{% elif rdv.statut == 'arrivé' %}arrived{% endif %}">
                        <div class="appointment-time">
                            <div class="time-badge {% if rdv.statut == 'urgent' %}urgent{% elif rdv.statut == 'confirmé' %}confirmed{% elif rdv.statut == 'en_attente' %}pending{% elif rdv.statut == 'arrivé' %}arrived{% endif %}">
                                {{ rdv.heure_rdv|time:"H:i" }}
                            </div>
                        </div>
                        <div class="appointment-details">
                            <div class="patient-name">{{ rdv.patient.user.first_name }} {{ rdv.patient.user.last_name }}</div>
                            <div class="appointment-type">{{ rdv.motif }} - Dr. {{ rdv.medecin.user.last_name }}</div>
                            <div class="appointment-info">Salle {{ rdv.salle|default:"--" }} • {{ rdv.patient.telephone|default:"--" }}</div>
                        </div>
                        <div class="appointment-status">
                            <span class="status-dot {% if rdv.statut == 'urgent' %}urgent{% elif rdv.statut == 'confirmé' %}confirmed{% elif rdv.statut == 'en_attente' %}pending{% elif rdv.statut == 'arrivé' %}arrived{% endif %}"></span>
                            <span class="status-text">{{ rdv.get_statut_display }}</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn-action success" onclick="confirmerRdv({{ rdv.id }})">
                                <i class="fas fa-check"></i>
                            </button>
                            <a href="tel:{{ rdv.patient.telephone }}" class="btn-action info">
                                <i class="fas fa-phone"></i>
                            </a>
                        </div>
                    </div>
                    {% empty %}
                    <div class="no-appointments">
                        <i class="fas fa-calendar-times"></i>
                        <p>Aucun rendez-vous ce matin</p>
                    </div>
                    {% endfor %}
                </div>

                <!-- Bloc après-midi -->
                <div class="time-block">
                    <div class="time-block-header">
                        <h4>Après-midi</h4>
                        <span class="block-count">{{ rdv_afternoon_count }} RDV</span>
                    </div>
                    
                    {% for rdv in rdv_afternoon %}
                    <div class="appointment-item {% if rdv.statut == 'urgent' %}urgent{% elif rdv.statut == 'confirmé' %}confirmed{% elif rdv.statut == 'en_attente' %}pending{% elif rdv.statut == 'arrivé' %}arrived{% endif %}">
                        <div class="appointment-time">
                            <div class="time-badge {% if rdv.statut == 'urgent' %}urgent{% elif rdv.statut == 'confirmé' %}confirmed{% elif rdv.statut == 'en_attente' %}pending{% elif rdv.statut == 'arrivé' %}arrived{% endif %}">
                                {{ rdv.heure_rdv|time:"H:i" }}
                            </div>
                        </div>
                        <div class="appointment-details">
                            <div class="patient-name">{{ rdv.patient.user.first_name }} {{ rdv.patient.user.last_name }}</div>
                            <div class="appointment-type">{{ rdv.motif }} - Dr. {{ rdv.medecin.user.last_name }}</div>
                            <div class="appointment-info">Salle {{ rdv.salle|default:"--" }} • {{ rdv.patient.telephone|default:"--" }}</div>
                        </div>
                        <div class="appointment-status">
                            <span class="status-dot {% if rdv.statut == 'urgent' %}urgent{% elif rdv.statut == 'confirmé' %}confirmed{% elif rdv.statut == 'en_attente' %}pending{% elif rdv.statut == 'arrivé' %}arrived{% endif %}"></span>
                            <span class="status-text">{{ rdv.get_statut_display }}</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn-action success" onclick="confirmerRdv({{ rdv.id }})">
                                <i class="fas fa-check"></i>
                            </button>
                            <a href="tel:{{ rdv.patient.telephone }}" class="btn-action info">
                                <i class="fas fa-phone"></i>
                            </a>
                        </div>
                    </div>
                    {% empty %}
                    <div class="no-appointments">
                        <i class="fas fa-calendar-times"></i>
                        <p>Aucun rendez-vous cet après-midi</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Sidebar tâches et notifications -->
        <div class="content-sidebar">
            <!-- Tâches urgentes -->
            <div class="sidebar-section">
                <div class="section-header mini">
                    <h3><i class="fas fa-exclamation-circle me-2"></i>Tâches Urgentes</h3>
                    <span class="alert-badge">{{ taches_urgentes_count }}</span>
                </div>
                
                <div class="tasks-list">
                    {% for tache in taches_urgentes %}
                    <div class="task-item urgent">
                        <div class="task-icon">
                            <i class="fas fa-phone-alt"></i>
                        </div>
                        <div class="task-content">
                            <div class="task-title">{{ tache.titre }}</div>
                            <div class="task-time">{{ tache.heure }}</div>
                        </div>
                        <button class="task-done" onclick="marquerTacheFaite({{ tache.id }})">
                            <i class="fas fa-check"></i>
                        </button>
                    </div>
                    {% empty %}
                    <div class="no-tasks">
                        <p>Aucune tâche urgente</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Salle d'attente -->
            <div class="sidebar-section">
                <div class="section-header mini">
                    <h3><i class="fas fa-users me-2"></i>Salle d'Attente</h3>
                    <span class="waiting-count">{{ patients_attente_count }}</span>
                </div>
                
                <div class="waiting-list">
                    {% for patient in patients_attente %}
                    <div class="waiting-item">
                        <div class="patient-avatar">
                            {{ patient.user.first_name.0 }}{{ patient.user.last_name.0 }}
                        </div>
                        <div class="waiting-info">
                            <div class="waiting-name">{{ patient.user.first_name }} {{ patient.user.last_name }}</div>
                            <div class="waiting-time">Arrivé il y a {{ patient.temps_attente }} min</div>
                        </div>
                        <div class="waiting-status ready"></div>
                    </div>
                    {% empty %}
                    <div class="no-waiting">
                        <p>Salle d'attente vide</p>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Actions rapides sidebar -->
            <div class="sidebar-actions">
                <a href="{% url 'nouveau_rdv' %}" class="sidebar-btn primary">
                    <i class="fas fa-plus"></i>
                    Nouveau RDV
                </a>
                <a href="/admin/main/patient/" class="sidebar-btn secondary">
                    <i class="fas fa-search"></i>
                    Rechercher patient
                </a>
                <button class="sidebar-btn accent" onclick="imprimerPlanning()">
                    <i class="fas fa-print"></i>
                    Imprimer planning
                </button>
                <a href="/admin/" class="sidebar-btn info">
                    <i class="fas fa-cog"></i>
                    Administration
                </a>
            </div>
        </div>
    </div>
</div>

<!-- CSS intégré pour le style moderne -->
<style>
/* Variables pour secrétaire */
:root {
    --primary: #6366f1;
    --primary-dark: #4f46e5;
    --secondary: #8b5cf6;
    --accent: #06b6d4;
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --info: #3b82f6;
    
    --white: #ffffff;
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    
    --gradient-secretary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --gradient-glass: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
    --shadow-glass: 0 8px 32px rgba(31, 38, 135, 0.37);
    --shadow-modern: 0 8px 30px rgba(0, 0, 0, 0.12);
}

/* Container principal */
.modern-container {
    min-height: 100vh;
    background: var(--gradient-secretary);
    padding: 2rem;
    font-family: 'Inter', sans-serif;
}

/* Header secrétaire */
.secretary-header {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: var(--shadow-glass);
    padding: 2rem;
    margin-bottom: 2rem;
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.secretary-info {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.secretary-avatar {
    width: 80px;
    height: 80px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.secretary-avatar i {
    font-size: 2rem;
    color: var(--white);
}

.secretary-details h2 {
    color: var(--white);
    font-size: 1.75rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
}

.secretary-role {
    color: rgba(255, 255, 255, 0.9);
    font-size: 1rem;
    margin: 0 0 0.5rem 0;
}

.status-badge {
    background: var(--success);
    color: var(--white);
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.quick-stats {
    display: flex;
    gap: 1.5rem;
}

.stat-card {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    padding: 1.5rem;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
    min-width: 120px;
}

.stat-number {
    font-size: 2rem;
    font-weight: 800;
    color: var(--white);
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 0.875rem;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
}

/* Actions rapides */
.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.action-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 1.5rem;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: var(--shadow-modern);
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    text-decoration: none;
    color: inherit;
}

.action-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    text-decoration: none;
    color: inherit;
}

.action-card.primary { border-left: 4px solid var(--primary); }
.action-card.secondary { border-left: 4px solid var(--secondary); }
.action-card.accent { border-left: 4px solid var(--accent); }
.action-card.info { border-left: 4px solid var(--info); }

.action-icon {
    width: 60px;
    height: 60px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: var(--white);
}

.action-card.primary .action-icon { background: var(--primary); }
.action-card.secondary .action-icon { background: var(--secondary); }
.action-card.accent .action-icon { background: var(--accent); }
.action-card.info .action-icon { background: var(--info); }

.action-content {
    flex: 1;
}

.action-content h3 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--gray-800);
    margin: 0 0 0.25rem 0;
}

.action-content p {
    font-size: 0.875rem;
    color: var(--gray-600);
    margin: 0;
}

.action-button {
    width: 40px;
    height: 40px;
    border-radius: 12px;
    background: var(--gray-100);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--gray-600);
    transition: all 0.3s ease;
}

.action-card:hover .action-button {
    background: var(--primary);
    color: var(--white);
    transform: scale(1.1);
}

/* Contenu principal */
.main-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
}

.content-section, .content-sidebar {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: var(--shadow-modern);
    overflow: hidden;
}

.section-header {
    background: var(--gradient-secretary);
    color: var(--white);
    padding: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.section-header h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.section-badge {
    background: rgba(255, 255, 255, 0.2);
    padding: 0.375rem 0.75rem;
    border-radius: 8px;
    font-size: 0.75rem;
    font-weight: 500;
}

.refresh-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: var(--white);
    width: 32px;
    height: 32px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.refresh-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

/* Rendez-vous */
.appointments-container {
    padding: 1.5rem;
    max-height: 600px;
    overflow-y: auto;
}

.time-block {
    margin-bottom: 2rem;
}

.time-block-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--gray-100);
}

.time-block-header h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--gray-800);
    margin: 0;
}

.block-count {
    background: var(--primary);
    color: var(--white);
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
}

.appointment-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border-radius: 12px;
    margin-bottom: 1rem;
    background: var(--white);
    border: 1px solid var(--gray-100);
    transition: all 0.3s ease;
}

.appointment-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.appointment-item.urgent {
    border-left: 4px solid var(--danger);
    background: linear-gradient(90deg, rgba(239, 68, 68, 0.05) 0%, var(--white) 100%);
}

.appointment-item.confirmed {
    border-left: 4px solid var(--success);
    background: linear-gradient(90deg, rgba(16, 185, 129, 0.05) 0%, var(--white) 100%);
}

.appointment-item.pending {
    border-left: 4px solid var(--warning);
    background: linear-gradient(90deg, rgba(245, 158, 11, 0.05) 0%, var(--white) 100%);
}

.appointment-item.arrived {
    border-left: 4px solid var(--info);
    background: linear-gradient(90deg, rgba(59, 130, 246, 0.05) 0%, var(--white) 100%);
}

.time-badge {
    min-width: 60px;
    padding: 0.5rem 0.75rem;
    border-radius: 8px;
    text-align: center;
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--white);
}

.time-badge.urgent { background: var(--danger); }
.time-badge.confirmed { background: var(--success); }
.time-badge.pending { background: var(--warning); }
.time-badge.arrived { background: var(--info); }

.appointment-details {
    flex: 1;
}

.patient-name {
    font-weight: 600;
    color: var(--gray-800);
    margin-bottom: 0.25rem;
}

.appointment-type {
    color: var(--gray-600);
    font-size: 0.875rem;
    margin-bottom: 0.25rem;
}

.appointment-info {
    color: var(--gray-500);
    font-size: 0.75rem;
}

.appointment-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.status-dot.urgent { background: var(--danger); animation: pulse 2s infinite; }
.status-dot.confirmed { background: var(--success); }
.status-dot.pending { background: var(--warning); }
.status-dot.arrived { background: var(--info); }

.status-text {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--gray-600);
}

.appointment-actions {
    display: flex;
    gap: 0.5rem;
}

.btn-action {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    border: none;
    color: var(--white);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
}

.btn-action.primary { background: var(--primary); }
.btn-action.secondary { background: var(--secondary); }
.btn-action.success { background: var(--success); }
.btn-action.warning { background: var(--warning); }
.btn-action.info { background: var(--info); }

.btn-action:hover {
    transform: scale(1.1);
    text-decoration: none;
    color: var(--white);
}

/* Messages d'état vide */
.no-appointments, .no-tasks, .no-waiting {
    text-align: center;
    padding: 2rem;
    color: var(--gray-500);
}

.no-appointments i {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: var(--gray-400);
}

/* Sidebar sections */
.sidebar-section {
    margin-bottom: 1.5rem;
}

.section-header.mini {
    background: var(--gradient-secretary);
    color: var(--white);
    padding: 1rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.section-header.mini h3 {
    font-size: 1rem;
    font-weight: 600;
    margin: 0;
}

.alert-badge {
    background: var(--danger);
    color: var(--white);
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
}

.waiting-count {
    background: var(--info);
    color: var(--white);
    padding: 0.25rem 0.5rem;
    border-radius: 8px;
    font-size: 0.75rem;
    font-weight: 600;
}

/* Tâches */
.tasks-list {
    padding: 1rem 1.5rem;
}

.task-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--gray-100);
}

.task-item:last-child {
    border-bottom: none;
}

.task-icon {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-size: 0.875rem;
}

.task-item.urgent .task-icon { background: var(--danger); }
.task-item.important .task-icon { background: var(--warning); }
.task-item.normal .task-icon { background: var(--info); }

.task-content {
    flex: 1;
}

.task-title {
    font-weight: 500;
    color: var(--gray-800);
    font-size: 0.875rem;
    margin-bottom: 0.25rem;
}

.task-time {
    font-size: 0.75rem;
    color: var(--gray-500);
}

.task-done {
    width: 24px;
    height: 24px;
    border-radius: 6px;
    border: 2px solid var(--gray-300);
    background: transparent;
    color: var(--gray-400);
    cursor: pointer;
    transition: all 0.3s ease;
}

.task-done:hover {
    border-color: var(--success);
    color: var(--success);
    background: rgba(16, 185, 129, 0.1);
}

/* Salle d'attente */
.waiting-list {
    padding: 1rem 1.5rem;
}

.waiting-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--gray-100);
}

.waiting-item:last-child {
    border-bottom: none;
}

.patient-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--primary);
    color: var(--white);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.875rem;
}

.waiting-info {
    flex: 1;
}

.waiting-name {
    font-weight: 500;
    color: var(--gray-800);
    font-size: 0.875rem;
    margin-bottom: 0.25rem;
}

.waiting-time {
    font-size: 0.75rem;
    color: var(--gray-500);
}

.waiting-status {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.waiting-status.ready { background: var(--success); }
.waiting-status.new { background: var(--info); animation: pulse 2s infinite; }

/* Actions sidebar */
.sidebar-actions {
    padding: 1.5rem;
    border-top: 1px solid var(--gray-100);
}

.sidebar-btn {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: 12px;
    border: none;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 0.75rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: var(--white);
    text-decoration: none;
}

.sidebar-btn.primary { background: var(--primary); }
.sidebar-btn.secondary { background: var(--secondary); }
.sidebar-btn.accent { background: var(--accent); }
.sidebar-btn.info { background: var(--info); }

.sidebar-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    text-decoration: none;
    color: var(--white);
}

@keyframes pulse {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.2);
        opacity: 0.7;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Responsive */
@media (max-width: 1200px) {
    .main-content {
        grid-template-columns: 1fr;
    }
    
    .quick-actions {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
}

@media (max-width: 768px) {
    .modern-container {
        padding: 1rem;
    }
    
    .header-content {
        flex-direction: column;
        gap: 1.5rem;
    }
    
    .quick-stats {
        flex-wrap: wrap;
        gap: 1rem;
    }
    
    .quick-actions {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
// Fonctions JavaScript pour l'interactivité
function confirmerRdv(rdvId) {
    if (confirm('Confirmer ce rendez-vous ?')) {
        fetch(`/confirmer-rdv/${rdvId}/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload();
            } else {
                alert('Erreur lors de la confirmation');
            }
        });
    }
}

function marquerTacheFaite(tacheId) {
    if (confirm('Marquer cette tâche comme terminée ?')) {
        fetch(`/marquer-tache-faite/${tacheId}/`, {
            method: 'POST',
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value,
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                location.reload();
            } else {
                alert('Erreur lors de la mise à jour');
            }
        });
    }
}

function imprimerPlanning() {
    window.print();
}
</script>
{% endblock %}